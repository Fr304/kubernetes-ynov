# kube-prometheus-stack — Helm values
# Chart    : prometheus-community/kube-prometheus-stack v80.14.3
# Release  : monitoring
# Namespace: monitoring
#
# Installation :
#   helm repo add prometheus-community https://prometheus-community.github.io/helm-charts
#   helm repo update
#   helm install monitoring prometheus-community/kube-prometheus-stack \
#     --namespace monitoring --create-namespace \
#     --version 80.14.3 \
#     -f values.yaml
#
# Mise à jour :
#   helm upgrade monitoring prometheus-community/kube-prometheus-stack \
#     --namespace monitoring \
#     --version 80.14.3 \
#     -f values.yaml

# -------------------------------------------------------------------
# Prometheus
# -------------------------------------------------------------------
prometheus:
  prometheusSpec:
    retention: 10d
    replicas: 1
    # Sélectionne toutes les PrometheusRules et ServiceMonitors
    ruleSelector: {}
    ruleNamespaceSelector: {}
    serviceMonitorSelector: {}
    serviceMonitorNamespaceSelector: {}
    podMonitorSelector: {}
    podMonitorNamespaceSelector: {}

# -------------------------------------------------------------------
# Alertmanager
# -------------------------------------------------------------------
alertmanager:
  alertmanagerSpec:
    retention: 120h
    replicas: 1

# -------------------------------------------------------------------
# Grafana (géré par la stack — distinct du grafana dans monitoring/)
# -------------------------------------------------------------------
grafana:
  enabled: true
  adminPassword: prom-operator   # À changer en production !
  ingress:
    enabled: false               # Ingress géré séparément (services/ingress.yaml)

# -------------------------------------------------------------------
# Composants intégrés
# -------------------------------------------------------------------
kubeStateMetrics:
  enabled: true

nodeExporter:
  enabled: true

# Désactivation des composants non accessibles en bare-metal
kubeControllerManager:
  enabled: false
kubeScheduler:
  enabled: false
kubeProxy:
  enabled: false
kubeEtcd:
  enabled: false
